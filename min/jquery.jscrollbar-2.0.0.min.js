(function(e){function n(a,b,c,d){var g=this.node,f=this.$node.clone().appendTo("body").width(b).height(c),k=g.scrollWidth>b,g=g.scrollHeight>c,h=0,h="";k&&g?h="xy":k?(h=f.css({height:c-d,zIndex:-1})[0].scrollHeight,h="x"+(h>c-d?"y":"")):(h=f.css({width:b-d,zIndex:-1})[0].scrollWidth,h=(h>b-d?"x":"")+"y");this.scrollWidth=f[0].scrollWidth;this.scrollHeight=f[0].scrollHeight;f.remove();this.bars=h;b=this.delta=(this.bars.length-1)*this.opt.width;c=this.thumbSize={x:p.call(this,"x"),y:p.call(this,"y")};
    this.maxPos={x:this.width-c.x-b,y:this.height-c.y-b};this.maxSPos={x:this.scrollWidth-this.width+b,y:this.scrollHeight-this.height+b};b=this.bars.split("");c={x:"height",y:"width"};g=k=0;for(h=b.length;g<h;g++)f=b[g],k=this.thumbSize[f],e('<div class="'+f+'"></div>').data("thumbType",f).css(c[f],d).append(e(q)[c["xy".replace(f,"")]](k).data("type",f)).insertAfter(a.css(c[f],"-="+d))}function p(a){a={x:"Width",y:"Height"}[a];var b=this.$node[a.toLowerCase()]();return Math.max(10,Math.pow(b-this.delta,
    2)/this.node["scroll"+a])}function r(){var a=this;e("#"+this.plugID).on("mousedown",".thumb",function(b){s.call(a,b,b.target);return!1});e(document).unbind("mouseup.jsb").bind("mouseup.jsb",function(){e(this).unbind("mousemove.jsb")});t.call(this);u.call(this)}function u(){var a=this;e("#"+this.plugID).on("click",".x,.y",function(b){var c=0,c=b.target,d=e.data(c,"thumbType"),g=m[d];c===this&&(c=b["page"+d.toUpperCase()]-e(c).offset()[g.p],a.scrollTo(d,c/a.maxPos[d]*a.maxSPos[d]))})}function t(){var a=
    this.node,b=this,c=null;this.opt.mouseevent&&(c=function(a){a=a||window.event;b.scrollBy(2===b.bars.length?"y":b.bars,-(a.wheelDelta?a.wheelDelta/120:-a.detail/3)*b.opt.mouseSpeed);e.event.fix(a).preventDefault()},a.addEventListener?(a.addEventListener("mousewheel",c),a.addEventListener("DOMMouseScroll",c)):a.onmousewheel=c)}function s(a,b){var c={X:a.pageX,Y:a.pageY},d=this,g={X:parseInt(e(b).css("left"))||0,Y:parseInt(e(b).css("top"))||0};e(document).bind("mousemove.jsb",function(a){var k=e.data(b,
    "type").toUpperCase(),h="X"===k?"left":"top";a=Math.min(Math.max(0,g[k]+(a["page"+k]-c[k])),d.maxPos[k.toLowerCase()]);e(b).css(h,a);d.scroll(k.toLowerCase())})}function l(a,b){this.node=a[0];this.$node=a;this.width=a.width();this.height=a.height();this.opt=b;this.plugID="jsb_"+Math.floor(9E3*Math.random()+1E3);var c=this.width,d=this.height,e=b.width;this.$node.css("overflow","hidden").wrap(v.attr("id",this.plugID).css({width:c,height:d}));n.call(this,this.$node,c,d,e);r.call(this)}var v=e('<div class="jscrollbar" style="overflow: hidden"></div>'),
    q='<div class="thumb"></div>',m={x:{s:"width",p:"left",sp:"scrollLeft",ss:"scrollWidth"},y:{s:"height",p:"top",sp:"scrollTop",ss:"scrollHeight"}};l.fn=l.prototype;l.fn.update=function(a){var b=this.$node,c=this.width,d=this.height,g=this.opt.width,f={x:this.getScrollPos("x"),y:this.getScrollPos("y")};console.log("loc;;",f);e("#"+this.plugID).find(".x,.y").remove();b.width(this.width).height(this.height);n.call(this,b,c,d,g);switch(a){case "relative":f.x&&this.scrollTo("x",f.x);f.y&&this.scrollTo("y",
    f.y);break;case "bottom":this.scrollTo("y",this.maxSPos.y);break;case "right":this.scrollTo("x",this.maxSPos.x);break;default:this.scroll()}this.scroll()};l.fn.getThumbLocation=function(a){for(var b=0,c=a.length,d=null,d=0;b<c;b++)d=e("#"+this.plugID).find("."+a.substr(b,1)+" .thumb"),d=d.css("x"===a?"left":"top");return parseFloat(d)||0};l.fn.getScrollPos=function(a){return this.node[m[a].sp]};l.fn.scroll=function(a){void 0===a&&(a="x",this.scroll("y"));var b=this.getThumbLocation(a),c=m[a];console.log(b,
    this.maxPos[a],this.maxSPos[a]);this.node[c.sp]=b/this.maxPos[a]*this.maxSPos[a]};l.fn.scrollBy=function(a,b){this.scrollTo(a,this.node[m[a].sp]+b)};l.fn.scrollTo=function(a,b){b=Math.max(Math.min(this.maxSPos[a],b),0);this.node[m[a].sp]=b;var c=m[a],d=this.maxPos[a]*(b||this.node[c.sp])/this.maxSPos[a];e("#"+this.plugID).find("."+a+" .thumb").css(c.p,d)};e.fn.jscrollbar=function(a){a=e.extend({},{width:12,position:"outer",showXBar:!0,showYBar:!0,mouseevent:!0,mouseSpeed:30},a);return this.each(function(){e.data(this,
    "jsb_data")||e.data(this,"jsb_data",new l(e(this),a))})};e.fn.jscrollbar.version="2.0.0"})(jQuery);